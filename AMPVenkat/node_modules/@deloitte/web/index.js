#!/usr/bin/env node

const fs = require('fs-extra');
const path = require('path');


function copyFolders() {
  const rootFolder = path.join(process.cwd())

  // Create Folder Structure for the project
  fs.mkdirSync(path.join(rootFolder, '.vscode'));
  fs.mkdirSync(path.join(rootFolder, 'environment-config'));
  fs.mkdirSync(path.join(rootFolder,'execution-config'));
  fs.mkdirSync(path.join(rootFolder,'features'));
  fs.mkdirSync(path.join(rootFolder,'logger'));
  fs.mkdirSync(path.join(rootFolder,'page-objects'));
  fs.mkdirSync(path.join(rootFolder,'step-definitions'));
  fs.mkdirSync(path.join(rootFolder,'test-data'));
  fs.mkdirSync(path.join(rootFolder,'utils'));
  
  // Create files and templates to the folder
  const packagePath = path.join(process.cwd(), 'node_modules', '@deloitte' ,'web');
  fs.copySync(path.join(packagePath, '.vscode'),path.join(rootFolder, '.vscode'))
  fs.copySync(path.join(packagePath, 'environment-config'),path.join(rootFolder, 'environment-config'))
  fs.copySync(path.join(packagePath, 'execution-config'),path.join(rootFolder, 'execution-config'))
  fs.copySync(path.join(packagePath, 'features'),path.join(rootFolder, 'features'))
  fs.copySync(path.join(packagePath, 'logger'),path.join(rootFolder, 'logger'))
  fs.copySync(path.join(packagePath, 'page-objects'),path.join(rootFolder, 'page-objects'))
  fs.copySync(path.join(packagePath, 'test-data'),path.join(rootFolder, 'test-data'))

  // Create Step Definition files
  fs.copyFileSync(path.join(packagePath, 'step-definitions', 'Given.js'), path.join(rootFolder,'step-definitions', 'Given.js'));

  // Create utils folders
  fs.mkdirSync(path.join(rootFolder, 'utils', 'project-utils'));

  // Copy .env and package.json files
  fs.copyFileSync(path.join(packagePath, '.env'),path.join(rootFolder, '.env'))
  fs.copyFileSync(path.join(packagePath, 'package.json'),path.join(rootFolder, 'package.json'))
  fs.copyFileSync(path.join(packagePath, 'jsconfig.json'),path.join(rootFolder, 'jsconfig.json'))
};

copyFolders();